const char depthpass_lua[] = "\n""local depthWriteMat = CreateMaterial( \"egsm/depthmat\", \"DepthWrite\", {\n""  [\"$no_fullbright\"] = \"1\",\n""  [\"$color_depth\"] = \"1\",\n""  [\"$alpha_test\"] = \"0\",\n""} )\n""\n""local FuckOffFog = GetRenderTarget( \"FuckOffFog\", ScrW(), ScrH() , 4,\n""	MATERIAL_RT_DEPTH_SHARED,\n""	4 + 8 + 1 + 65536,\n""	0,\n""	29)\n""\n""local bDepthPass = false\n""local halo = {}\n""local render = render\n""\n""MaterialOverride 	   =  	MaterialOverride or render.MaterialOverride\n""BrushMaterialOverride  = 	BrushMaterialOverride or render.BrushMaterialOverride \n""WorldMaterialOverride  = 	WorldMaterialOverride or render.WorldMaterialOverride \n""ModelMaterialOverride  = 	ModelMaterialOverride or render.ModelMaterialOverride \n""\n""local MaterialOverride = MaterialOverride\n""local BrushMaterialOverride = BrushMaterialOverride\n""local WorldMaterialOverride = WorldMaterialOverride\n""local ModelMaterialOverride = ModelMaterialOverride\n""\n""function render.MaterialOverride(m)\n""	if bDepthPass then return end\n""	MaterialOverride(m)\n""end\n""\n""function render.BrushMaterialOverride(m)\n""	if bDepthPass then return end\n""	BrushMaterialOverride(m)\n""end\n""\n""function render.WorldMaterialOverride(m)\n""	if bDepthPass then return end\n""	WorldMaterialOverride(m)\n""end\n""function render.ModelMaterialOverride(m)\n""	if bDepthPass then return end\n""	ModelMaterialOverride(m)\n""end\n""\n""local function dummyFn() end\n""\n""local PushRenderTarget  = 	render.PushRenderTarget\n""local PopRenderTarget  = 	render.PopRenderTarget\n""local rClear  = render.Clear\n""local depthRT = render.GetResolvedFullFrameDepth()\n""local hRender = dummyFn\n""local BeginDepthPass = shaderlib.BeginDepthPass\n""local EndDepthPass = shaderlib.EndDepthPass\n""\n""local function PreDrawEffectsHK() \n""	if bDepthPass then return end\n""	bDepthPass = true\n""	halo.Render = dummyFn\n""\n""	\n""	MaterialOverride( depthWriteMat )\n""	BrushMaterialOverride( depthWriteMat )\n""	WorldMaterialOverride( depthWriteMat )\n""	ModelMaterialOverride( depthWriteMat )\n""	\n""	PushRenderTarget(FuckOffFog)\n""		BeginDepthPass()\n""			rClear(0,0,0,0)\n""			PopRenderTarget()\n""			\n""			rClear(0,0,0,0)\n""			PopRenderTarget()\n""			\n""			render.RenderView()\n""		EndDepthPass()\n""	PopRenderTarget()\n""\n""	MaterialOverride()\n""	BrushMaterialOverride()\n""	WorldMaterialOverride()\n""	ModelMaterialOverride()\n""	\n""	halo.Render = hRender\n""	bDepthPass = false\n""end\n""\n""local rClearDepth = render.ClearDepth\n""\n""function shaderlib.__INIT()\n""	halo = halo\n""	hRender = halo.Render\n""	hook.Add(\"PreDrawViewModel\", \"EGSM_ImTooLazy\", rClearDepth)\n""	hook.Add( \"PreDrawEffects\", \"EGSM_ImTooLazy\", PreDrawEffectsHK)\n""end\n""\n";